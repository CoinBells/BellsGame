<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Bells Game</title>

<style>
  :root{
    --gold:#E9B846;
    --brown:#3A2405;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:#f6eccc; font-family:monospace; overflow:hidden;
    -webkit-tap-highlight-color:transparent;
    touch-action:manipulation;
  }

  #startScreen{
    position:fixed; inset:0; background:#f6eccc; z-index:50;
    display:flex; justify-content:center; align-items:center; flex-direction:column;
  }
  #startLogo{width:100%; height:100%; object-fit:cover;}
  #startBtn{
    position:absolute; bottom:56px;
    background:var(--gold); color:var(--brown);
    padding:16px 52px; border:none; border-radius:14px;
    font-size:24px; font-weight:bold; cursor:pointer;
  }

  #gameBg{
    position:fixed; inset:0; width:100%; height:100%;
    object-fit:cover; z-index:-1;
  }

  #scoreBox{
    position:fixed; top:20px; right:20px; z-index:10;
    background:rgba(255,255,255,.85);
    padding:15px 22px; border-radius:20px;
    font-size:21px; font-weight:600; display:none;
  }

  .bag{
    position:absolute; width:58px; height:58px;
    user-select:none; pointer-events:auto;
    -webkit-user-drag:none;
    transition:transform .12s;
  }

  #popup{
    position:fixed; left:50%; top:50%;
    transform:translate(-50%,-50%);
    width:85%; max-width:480px;
    background:#0d1117; color:#e6edf3;
    padding:28px; border-radius:18px;
    display:none; z-index:40;
  }
  .btn{
    width:100%; padding:14px; margin-top:14px;
    background:var(--gold); color:var(--brown);
    border:none; border-radius:12px;
    font-size:20px; font-weight:bold; cursor:pointer;
  }

  #footer{
    position:fixed; bottom:16px; left:50%;
    transform:translateX(-50%); font-size:16px; font-weight:bold;
  }
</style>
</head>

<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="startScreen">
  <img id="startLogo" src="images/BELLSLOGO.PNG">
  <button id="startBtn">START</button>
</div>

<img id="gameBg" src="images/TOM.PNG">

<div id="scoreBox">
  Bells: <span id="score">0</span> â€” Time: <span id="timer">5</span>s
</div>

<div id="popup">
  <h2>BellsChain</h2>
  BellsCoin is a Scrypt-based PoW chain with merged mining via LTC & DOGE.<br><br>
  Listed on:<br>
  â€“ Nintondo.io<br>
  â€“ NONKYC.io<br>
  â€“ Gate.io<br>
  â€“ MEXC<br><br>

  <b>Your Performance:</b><br>
  <span id="performance"></span><br><br>

  <button class="btn" id="closeBtn">Close</button>
  <button class="btn" id="againBtn">Again</button>
</div>

<div id="footer">BY: @AMJ_BTC</div>

<script>
let score = 0;
let timeLeft = 5;
let timerInterval = null;
let bagInterval = null;
let playing = false;

/* ØµÙˆØª Ø¨Ø³ÙŠØ· */
let audioCtx = null;
function initAudio(){
  if(!audioCtx){
    const AC = window.AudioContext || window.webkitAudioContext;
    audioCtx = new AC();
  }
}
function playCoin(){
  if(!audioCtx) return;
  const o = audioCtx.createOscillator();
  const g = audioCtx.createGain();
  o.type = "square";
  o.frequency.setValueAtTime(1200, audioCtx.currentTime);
  o.frequency.exponentialRampToValueAtTime(400, audioCtx.currentTime + 0.12);
  g.gain.setValueAtTime(0.12, audioCtx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 0.13);
  o.connect(g).connect(audioCtx.destination);
  o.start(); o.stop(audioCtx.currentTime + 0.14);
}

/* Ø§Ù„Ø­Ù‚ÙŠØ¨Ø© */
function catchBag(img){
  if(img.dataset.caught === "1") return; // âœ… ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
  img.dataset.caught = "1";             // âœ… Ø£ÙˆÙ„ Ù„Ù…Ø³Ø© ÙÙ‚Ø·

  score++;
  document.getElementById("score").textContent = score;

  playCoin();

  img.style.transform = "scale(0.25)";
  setTimeout(()=> img.remove(), 120);
}

/* Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· */
function makeInteractive(img){
  img.addEventListener("pointerdown", (e)=>{
    e.preventDefault();
    catchBag(img);
  }, {passive:false});
}

/* Ø¥Ù†Ø²Ø§Ù„ Ø§Ù„Ø­Ù‚Ø§Ø¦Ø¨ */
function spawnBag(){
  const img = document.createElement("img");
  img.src = "images/BELLS.PNG";
  img.className = "bag";

  img.style.left = Math.random() * (window.innerWidth - 60) + "px";
  img.style.top = "-80px";

  makeInteractive(img);
  document.body.appendChild(img);

  const fall = setInterval(()=>{
    img.style.top = (img.offsetTop + 6) + "px";
    if(img.offsetTop > window.innerHeight){
      clearInterval(fall);
      img.remove();
    }
    if(!playing){
      clearInterval(fall);
      img.remove();
    }
  },20);
}

/* Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© */
function startGame(){
  initAudio();

  const s = document.getElementById("startScreen");
  s.style.opacity = "0";
  s.style.pointerEvents = "none";
  setTimeout(()=> s.style.display = "none", 250);

  document.getElementById("scoreBox").style.display = "block";

  score = 0; timeLeft = 5; playing = true;
  document.getElementById("score").textContent = score;
  document.getElementById("timer").textContent = timeLeft;

  timerInterval = setInterval(()=>{
    timeLeft--;
    document.getElementById("timer").textContent = timeLeft;
    if(timeLeft <= 0) endGame();
  },1000);

  bagInterval = setInterval(spawnBag, 350);
}

/* Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù„Ø¹Ø¨Ø© */
function endGame(){
  playing = false;
  clearInterval(timerInterval);
  clearInterval(bagInterval);

  let perf = "Weak ðŸ’€";
  if(score >= 10) perf = "Excellent ðŸ”¥";
  else if(score >= 5) perf = "Good âœ…";

  document.getElementById("performance").textContent = perf;
  document.getElementById("popup").style.display = "block";
}

document.getElementById("startBtn").onclick = startGame;
document.getElementById("closeBtn").onclick = ()=> document.getElementById("popup").style.display = "none";
document.getElementById("againBtn").onclick = ()=>{ document.getElementById("popup").style.display = "none"; startGame(); };
</script>

</body>
</html>
